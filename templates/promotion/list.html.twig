{% extends 'admin/dashboard.html.twig' %}

{% block title %}Liste des Promotions{% endblock %}

{% block additionalStyles %}
	<link href="{{ asset('styles/back-office/promo.css') }}" rel="stylesheet"/>
{% endblock %}

{% block main %}
<section class="emplacement">
    <div class="info_page_promo">
		<h2 class="title_promo">
		{{ title }}
		</h2>
		<hr class="info_promo_hr">
	</div>
    <div class="bouton_ajout">
        <h3>
        <a href="{{ path('app_create_promotion') }}">Ajouter une nouvelle promo</a>
        </h3>
    </div>
    <table>
        <tr>
            <th>Promotion</th>
            <th>Réduction</th>
            <th colspan="3">Produits</th>
            <th>Contrôles</th>
        </tr>
        {% for promotion in promotions %}
            <tr>
                <td><a href="{{ path('app_show_promotion', { 'id': promotion.id }) }}">{{ promotion.label }}</a></td>
                <td>{{ promotion.rate }} %</td>
                <td colspan="3">
                    <ul>
                        {% for product in promotion.products %}
                            <li><a href="">{{ product.name }}</a> <a href="{{ path('app_detach_product_from_promotion', { 'id': product.id }) }}">Retirer</a></li>
                        {% endfor %}
                    </ul>
                </td>
                <td>
                    <a href="{{ path('app_update_promotion', { 'id': promotion.id }) }}">Modifier</a>
                    <a href="{{ path('app_delete_promotion', { 'id': promotion.id }) }}" class="danger">Supprimer</a>
                </td>
            </tr>
        {% endfor %}
    </table>
    </section>
{% endblock %}
